name: Daily AI News

on:
  workflow_dispatch: # 允许手动点击按钮触发测试
  schedule:
    # GitHub使用UTC时间。
    # 北京时间早上 7:00 = UTC时间 前一天 23:00
    - cron: '0 23 * * *'

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'

    - name: Install dependencies
      run: |
        pip install -r requirements.txt

    - name: Run script
      env:
        # 这里引用你在GitHub Secrets里填写的变量
        LLM_API_KEY: ${{ secrets.LLM_API_KEY }}
        LLM_BASE_URL: ${{ secrets.LLM_BASE_URL }}
        LLM_MODEL: ${{ secrets.LLM_MODEL }}
        PUSHPLUS_TOKEN: ${{ secrets.PUSHPLUS_TOKEN }}
      run: python main.py